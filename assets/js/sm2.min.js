function InlinePlayer(){var e=this,t=this,n=soundManager;this.excludeClass="inline-exclude",this.links=[],this.sounds=[],this.soundsByURL=[],this.indexByURL=[],this.lastSound=null,this.soundCount=0;var a=navigator.userAgent.match(/msie/i);this.config={playNext:!1,autoPlay:!1},this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"},this.addEventHandler=function(e,t,n){"undefined"==typeof attachEvent?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)},this.removeEventHandler=function(e,t,n){"undefined"==typeof attachEvent?e.removeEventListener(t,n,!1):e.detachEvent("on"+t,n)},this.classContains=function(e,t){return"undefined"!=typeof e.className?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):!1},this.addClass=function(t,n){return t&&n&&!e.classContains(t,n)?void(t.className=(t.className?t.className+" ":"")+n):!1},this.removeClass=function(t,n){return t&&n&&e.classContains(t,n)?void(t.className=t.className.replace(new RegExp("( "+n+")|("+n+")","g"),"")):!1},this.getSoundByURL=function(t){return"undefined"!=typeof e.soundsByURL[t]?e.soundsByURL[t]:null},this.isChildOfNode=function(e,t){if(!e||!e.parentNode)return!1;t=t.toLowerCase();do e=e.parentNode;while(e&&e.parentNode&&e.nodeName.toLowerCase()!=t);return e.nodeName.toLowerCase()==t?e:null},this.events={play:function(){t.removeClass(this._data.oLink,this._data.className),this._data.className=t.css.sPlaying,t.addClass(this._data.oLink,this._data.className)},stop:function(){t.removeClass(this._data.oLink,this._data.className),this._data.className=""},pause:function(){t.removeClass(this._data.oLink,this._data.className),this._data.className=t.css.sPaused,t.addClass(this._data.oLink,this._data.className)},resume:function(){t.removeClass(this._data.oLink,this._data.className),this._data.className=t.css.sPlaying,t.addClass(this._data.oLink,this._data.className)},finish:function(){if(t.removeClass(this._data.oLink,this._data.className),this._data.className="",t.config.playNext){var e=t.indexByURL[this._data.oLink.href]+1;e<t.links.length&&t.handleClick({target:t.links[e]})}}},this.stopEvent=function(e){return"undefined"!=typeof e&&"undefined"!=typeof e.preventDefault?e.preventDefault():"undefined"!=typeof event&&"undefined"!=typeof event.returnValue&&(event.returnValue=!1),!1},this.getTheDamnLink=a?function(e){return e&&e.target?e.target:window.event.srcElement}:function(e){return e.target},this.handleClick=function(t){if("undefined"!=typeof t.button&&t.button>1)return!0;var s=e.getTheDamnLink(t);if("a"!=s.nodeName.toLowerCase()&&(s=e.isChildOfNode(s,"a"),!s))return!0;var i=s.getAttribute(s.getAttribute("href")?"href":"data-url");if(!i||e.classContains(s,e.excludeClass))return a&&s.onclick?!1:!0;n._writeDebug("handleClick()");var o;s.href.match(/(\.mp3|\.m4a)/i)?o=s.href:s.getAttribute("data-url")&&(o=s.getAttribute("data-url"));var d=e.getSoundByURL(o);return d?d==e.lastSound?d.togglePause():(d.togglePause(),n._writeDebug("sound different than last sound: "+e.lastSound.sID),e.lastSound&&e.stopSound(e.lastSound)):(d=n.createSound({id:"inlineMP3Sound"+e.soundCount++,url:o,onplay:e.events.play,onstop:e.events.stop,onpause:e.events.pause,onresume:e.events.resume,onfinish:e.events.finish}),d._data={oLink:s,className:e.css.sPlaying},e.soundsByURL[o]=d,e.sounds.push(d),e.lastSound&&e.stopSound(e.lastSound),d.play()),e.lastSound=d,"undefined"!=typeof t&&"undefined"!=typeof t.preventDefault?t.preventDefault():event.returnValue=!1,!1},this.stopSound=function(e){soundManager.stop(e.sID),soundManager.unload(e.sID)},this.init=function(){n._writeDebug("inlinePlayer.init()");for(var t=document.getElementsByTagName("a"),a=0,s=0;s<t.length;s++){var i=t[s].getAttribute("data-url")?t[s].getAttribute("data-url"):"";t[s].href.match(/(\.mp3|\.m4a)/i)?(e.addClass(t[s],e.css.sDefault),e.links[a]=t[s],e.indexByURL[t[s].href]=a,a++):i.match(/(\.mp3|\.m4a)/i)&&(e.addClass(t[s],e.css.sDefault),e.links[a]=t[s],e.indexByURL[i]=a,a++)}a>0&&(e.addEventHandler(document,"click",e.handleClick),e.config.autoPlay&&e.handleClick({target:e.links[0],preventDefault:function(){}})),n._writeDebug("inlinePlayer.init(): Found "+a+" relevant items.")},this.init()}var inlinePlayer=null;soundManager.debugMode=!1,soundManager.url="/assets/js/",soundManager.flashVersion=9,soundManager.useMovieStar=!0,soundManager.onready(function(){soundManager.supported()&&(inlinePlayer=new InlinePlayer)});